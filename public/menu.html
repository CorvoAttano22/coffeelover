<!doctype html>
<html lang="en">
  <head>
    <title>Coffee - Free Bootstrap 4 Template by Colorlib</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <link
      href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Great+Vibes"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css" />
    <link rel="stylesheet" href="css/animate.css" />

    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />

    <link rel="stylesheet" href="css/aos.css" />

    <link rel="stylesheet" href="css/ionicons.min.css" />

    <link rel="stylesheet" href="css/bootstrap-datepicker.css" />
    <link rel="stylesheet" href="css/jquery.timepicker.css" />

    <link rel="stylesheet" href="css/flaticon.css" />
    <link rel="stylesheet" href="css/icomoon.css" />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/menu-wrap.css" />
  </head>
  <body>
    <!-- nav -->
    <div id="navbar-placeholder"></div>
    <!-- nav -->

    <section class="home-slider owl-carousel">
      <div
        class="slider-item"
        style="background-image: url(images/bg_3.jpg)"
        data-stellar-background-ratio="0.5"
      >
        <div class="overlay"></div>
        <div class="container">
          <div
            class="row slider-text justify-content-center align-items-center"
          >
            <div class="col-md-7 col-sm-12 text-center ftco-animate">
              <h1 class="mb-3 mt-5 bread">Our Menu</h1>
              <p class="breadcrumbs">
                <span class="mr-2"><a href="index.html">Home</a></span>
                <span>Menu</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="ftco-menu mb-5 pb-5">
      <div class="container">
        <div class="row justify-content-center mb-5">
          <div class="col-md-7 heading-section text-center ftco-animate">
            <span class="subheading">Menu</span>
            <h2 class="mb-4">Our Coffee Selection</h2>
            <p>
              Far far away, behind the word mountains, far from the countries
              Vokalia and Consonantia, there live the blind texts.
            </p>
          </div>
        </div>
        <div class="row d-md-flex">
          <div class="col-lg-12 ftco-animate p-md-5">
            <div class="row">
              <div class="col-md-12 nav-link-wrap mb-5">
                <div
                  class="nav ftco-animate nav-pills justify-content-center"
                  id="v-pills-tab"
                  role="tablist"
                  aria-orientation="vertical"
                >
                  <a
                    class="nav-link active"
                    id="v-pills-1-tab"
                    data-toggle="pill"
                    href="#v-pills-1"
                    role="tab"
                    aria-controls="v-pills-1"
                    aria-selected="true"
                    >Coffees</a
                  >

                  <a
                    class="nav-link"
                    id="v-pills-2-tab"
                    data-toggle="pill"
                    href="#v-pills-2"
                    role="tab"
                    aria-controls="v-pills-2"
                    aria-selected="false"
                    >Other Drinks</a
                  >
                </div>
              </div>
              <div class="col-md-12 d-flex align-items-center">
                <div class="tab-content ftco-animate" id="v-pills-tabContent">
                  <div
                    class="tab-pane fade show active"
                    id="v-pills-1"
                    role="tabpanel"
                    aria-labelledby="v-pills-1-tab"
                  >
                    <div class="row menu-row" id="coffee-list"></div>
                  </div>

                  <div
                    class="tab-pane fade"
                    id="v-pills-2"
                    role="tabpanel"
                    aria-labelledby="v-pills-2-tab"
                  >
                    <div class="row">
                      <div class="col-md-4 text-center">
                        <div class="menu-wrap">
                          <a
                            href="#"
                            class="menu-img img mb-4"
                            style="background-image: url(images/drink-1.jpg)"
                          ></a>
                          <div class="text">
                            <h3><a href="#">Lemonade Juice</a></h3>
                            <p>
                              Far far away, behind the word mountains, far from
                              the countries Vokalia and Consonantia.
                            </p>
                            <p class="price"><span>$2.90</span></p>
                            <p>
                              <a
                                href="#"
                                class="btn btn-primary btn-outline-primary"
                                >Add to cart</a
                              >
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4 text-center">
                        <div class="menu-wrap">
                          <a
                            href="#"
                            class="menu-img img mb-4"
                            style="background-image: url(images/drink-2.jpg)"
                          ></a>
                          <div class="text">
                            <h3><a href="#">Pineapple Juice</a></h3>
                            <p>
                              Far far away, behind the word mountains, far from
                              the countries Vokalia and Consonantia.
                            </p>
                            <p class="price"><span>$2.90</span></p>
                            <p>
                              <a
                                href="#"
                                class="btn btn-primary btn-outline-primary"
                                >Add to cart</a
                              >
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4 text-center">
                        <div class="menu-wrap">
                          <a
                            href="#"
                            class="menu-img img mb-4"
                            style="background-image: url(images/drink-3.jpg)"
                          ></a>
                          <div class="text">
                            <h3><a href="#">Soda Drinks</a></h3>
                            <p>
                              Far far away, behind the word mountains, far from
                              the countries Vokalia and Consonantia.
                            </p>
                            <p class="price"><span>$2.90</span></p>
                            <p>
                              <a
                                href="#"
                                class="btn btn-primary btn-outline-primary"
                                >Add to cart</a
                              >
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4 text-center">
                        <div class="menu-wrap">
                          <a
                            href="#"
                            class="menu-img img mb-4"
                            style="background-image: url(images/drink-4.jpg)"
                          ></a>
                          <div class="text">
                            <h3><a href="#">Lemonade Juice</a></h3>
                            <p>
                              Far far away, behind the word mountains, far from
                              the countries Vokalia and Consonantia.
                            </p>
                            <p class="price"><span>$2.90</span></p>
                            <p>
                              <a
                                href="#"
                                class="btn btn-primary btn-outline-primary"
                                >Add to cart</a
                              >
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4 text-center">
                        <div class="menu-wrap">
                          <a
                            href="#"
                            class="menu-img img mb-4"
                            style="background-image: url(images/drink-5.jpg)"
                          ></a>
                          <div class="text">
                            <h3><a href="#">Pineapple Juice</a></h3>
                            <p>
                              Far far away, behind the word mountains, far from
                              the countries Vokalia and Consonantia.
                            </p>
                            <p class="price"><span>$2.90</span></p>
                            <p>
                              <a
                                href="#"
                                class="btn btn-primary btn-outline-primary"
                                >Add to cart</a
                              >
                            </p>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-4 text-center">
                        <div class="menu-wrap">
                          <a
                            href="#"
                            class="menu-img img mb-4"
                            style="background-image: url(images/drink-6.jpg)"
                          ></a>
                          <div class="text">
                            <h3><a href="#">Soda Drinks</a></h3>
                            <p>
                              Far far away, behind the word mountains, far from
                              the countries Vokalia and Consonantia.
                            </p>
                            <p class="price"><span>$2.90</span></p>
                            <p>
                              <a
                                href="#"
                                class="btn btn-primary btn-outline-primary"
                                >Add to cart</a
                              >
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="ftco-footer ftco-section img">
      <div class="overlay"></div>
      <div class="container">
        <div class="row mb-5">
          <div class="col-lg-3 col-md-6 mb-5 mb-md-5">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">About Us</h2>
              <p>
                Far far away, behind the word mountains, far from the countries
                Vokalia and Consonantia, there live the blind texts.
              </p>
              <ul
                class="ftco-footer-social list-unstyled float-md-left float-lft mt-5"
              >
                <li class="ftco-animate">
                  <a href="#"><span class="icon-twitter"></span></a>
                </li>
                <li class="ftco-animate">
                  <a href="#"><span class="icon-facebook"></span></a>
                </li>
                <li class="ftco-animate">
                  <a href="#"><span class="icon-instagram"></span></a>
                </li>
              </ul>
            </div>
          </div>
          <div class="col-lg-4 col-md-6 mb-5 mb-md-5">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Recent Blog</h2>
              <div class="block-21 mb-4 d-flex">
                <a
                  class="blog-img mr-4"
                  style="background-image: url(images/image_1.jpg)"
                ></a>
                <div class="text">
                  <h3 class="heading">
                    <a href="#"
                      >Even the all-powerful Pointing has no control about</a
                    >
                  </h3>
                  <div class="meta">
                    <div>
                      <a href="#"
                        ><span class="icon-calendar"></span> Sept 15, 2018</a
                      >
                    </div>
                    <div>
                      <a href="#"><span class="icon-person"></span> Admin</a>
                    </div>
                    <div>
                      <a href="#"><span class="icon-chat"></span> 19</a>
                    </div>
                  </div>
                </div>
              </div>
              <div class="block-21 mb-4 d-flex">
                <a
                  class="blog-img mr-4"
                  style="background-image: url(images/image_2.jpg)"
                ></a>
                <div class="text">
                  <h3 class="heading">
                    <a href="#"
                      >Even the all-powerful Pointing has no control about</a
                    >
                  </h3>
                  <div class="meta">
                    <div>
                      <a href="#"
                        ><span class="icon-calendar"></span> Sept 15, 2018</a
                      >
                    </div>
                    <div>
                      <a href="#"><span class="icon-person"></span> Admin</a>
                    </div>
                    <div>
                      <a href="#"><span class="icon-chat"></span> 19</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-2 col-md-6 mb-5 mb-md-5">
            <div class="ftco-footer-widget mb-4 ml-md-4">
              <h2 class="ftco-heading-2">Services</h2>
              <ul class="list-unstyled">
                <li><a href="#" class="py-2 d-block">Cooked</a></li>
                <li><a href="#" class="py-2 d-block">Deliver</a></li>
                <li><a href="#" class="py-2 d-block">Quality Foods</a></li>
                <li><a href="#" class="py-2 d-block">Mixed</a></li>
              </ul>
            </div>
          </div>
          <div class="col-lg-3 col-md-6 mb-5 mb-md-5">
            <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Have a Questions?</h2>
              <div class="block-23 mb-3">
                <ul>
                  <li>
                    <span class="icon icon-map-marker"></span
                    ><span class="text"
                      >203 Fake St. Mountain View, San Francisco, California,
                      USA</span
                    >
                  </li>
                  <li>
                    <a href="#"
                      ><span class="icon icon-phone"></span
                      ><span class="text">+2 392 3929 210</span></a
                    >
                  </li>
                  <li>
                    <a href="#"
                      ><span class="icon icon-envelope"></span
                      ><span class="text">info@yourdomain.com</span></a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">
            <p>
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
              Copyright &copy;
              <script>
                document.write(new Date().getFullYear());
              </script>
              All rights reserved | This template is made with
              <i class="icon-heart" aria-hidden="true"></i> by
              <a href="https://colorlib.com" target="_blank">Colorlib</a>
              <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
            </p>
          </div>
        </div>
      </div>
    </footer>

    <!-- loader -->
    <div id="ftco-loader" class="show fullscreen">
      <svg class="circular" width="48px" height="48px">
        <circle
          class="path-bg"
          cx="24"
          cy="24"
          r="22"
          fill="none"
          stroke-width="4"
          stroke="#eeeeee"
        />
        <circle
          class="path"
          cx="24"
          cy="24"
          r="22"
          fill="none"
          stroke-width="4"
          stroke-miterlimit="10"
          stroke="#F96D00"
        />
      </svg>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-migrate-3.0.1.min.js"></script>
    <script src="js/popper.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.easing.1.3.js"></script>
    <script src="js/jquery.waypoints.min.js"></script>
    <script src="js/jquery.stellar.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/jquery.magnific-popup.min.js"></script>
    <script src="js/aos.js"></script>
    <script src="js/jquery.animateNumber.min.js"></script>
    <script src="js/bootstrap-datepicker.js"></script>
    <script src="js/jquery.timepicker.min.js"></script>
    <script src="js/scrollax.min.js"></script>
    <script src="js/main.js"></script>
    <script type="module" src="js/product.js"></script>
    <script type="module">
      import { apiFetch } from './js/apiClient.js';
      import { checkUserStatus } from './js/user.js';
      import { setupLogoutHandler } from './js/logout.js';

      async function loadNavbarAndAuth() {
        const navbarPlaceholder = document.getElementById('navbar-placeholder');
        if (!navbarPlaceholder) return;

        try {
          const res = await fetch('navbar.html');
          const html = await res.text();
          navbarPlaceholder.innerHTML = html;

          checkUserStatus();
          setupLogoutHandler();
        } catch (error) {
          console.error('Error setting up authentication:', error);
        }
      }

      async function loadAllCoffees() {
        try {
          const res = await apiFetch('/api/coffees');

          if (res.status !== 200) {
            throw new Error(`Failed to fetch coffees. Status: ${res.status}`);
          }

          let data = await res.json();

          if (!Array.isArray(data)) {
            if (data && data.coffees && Array.isArray(data.coffees)) {
              data = data.coffees;
            } else {
              console.warn('API returned unexpected data format:', data);
              data = [];
            }
          }

          const container = document.getElementById('coffee-list');
          if (!container) return;

          if (data.length === 0) {
            container.innerHTML =
              '<p class="text-center">No coffee products found at this time.</p>';
            return;
          }

          container.innerHTML = data
            .map((item) => {
              const variants = item.variants || [];
              const lowestPrice = variants.length
                ? Math.min(...variants.map((v) => Number(v.price)))
                : 'N/A';

              return `
                    <div class="col-md-4 text-center">
                        <div class="menu-wrap">
                            <a href="/product-single.html?id=${item.id}" 
                               class="menu-img img mb-4" 
                               style="background-image: url(${item.image})">
                            </a>
                            <div class="text">
                                <h3><a href="/product-single.html?id=${item.id}">${item.name}</a></h3>
                                <p>${item.description || ''}</p>
                                <p class="price"><span>From $${lowestPrice}</span></p>
                                <p>
                                    <a href="/product-single.html?id=${item.id}" class="btn btn-primary btn-outline-primary">
                                        View Details
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                `;
            })
            .join('');
        } catch (err) {
          console.error('Error loading coffees:', err);
          const container = document.getElementById('coffee-list');
          if (container) {
            container.innerHTML = `<p>Error loading products: ${err.message}. Try reloading.</p>`;
          }
        }
      }

      document.addEventListener('DOMContentLoaded', async function () {
        await loadNavbarAndAuth();
        await loadAllCoffees();
      });
    </script>
  </body>
</html>
